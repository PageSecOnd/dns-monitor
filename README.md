# DNSæœåŠ¡å™¨ç›‘æ§ç³»ç»Ÿ

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![Docker](https://img.shields.io/badge/docker-ready-blue.svg)](https://hub.docker.com/)

ç°ä»£åŒ–ã€ç‚«é…·çš„DNSæœåŠ¡å™¨ç›‘æ§ç³»ç»Ÿï¼Œä¸“ä¸ºå®æ—¶ç›‘æ§Debianç³»ç»Ÿå’ŒBIND9 DNSæœåŠ¡å™¨çŠ¶æ€è€Œè®¾è®¡ã€‚

![DNS Monitor Screenshot](https://github.com/user-attachments/assets/9017965e-bb41-4c5c-b06f-f738b5f48ad0)

## âœ¨ ç‰¹æ€§

### ğŸ–¥ï¸ ç³»ç»Ÿç›‘æ§
- ğŸ”„ å®æ—¶CPUä½¿ç”¨ç‡ç›‘æ§ï¼ˆå¸¦åŠ¨æ€ä»ªè¡¨ç›˜ï¼‰
- ğŸ’¾ å†…å­˜ä½¿ç”¨æƒ…å†µæ˜¾ç¤ºï¼ˆè¿›åº¦æ¡å’Œç™¾åˆ†æ¯”ï¼‰
- ğŸ’¿ ç£ç›˜ä½¿ç”¨æƒ…å†µç›‘æ§
- ğŸŒ ç½‘ç»œæµé‡ç»Ÿè®¡
- âš–ï¸ ç³»ç»Ÿè´Ÿè½½å¹³å‡å€¼
- â±ï¸ ç³»ç»Ÿè¿è¡Œæ—¶é—´æ˜¾ç¤º

### ğŸŒ DNSæœåŠ¡ç›‘æ§
- ğŸ”§ BIND9æœåŠ¡çŠ¶æ€ç›‘æ§
- ğŸ“Š DNSæŸ¥è¯¢ç»Ÿè®¡ï¼ˆQPSï¼‰
- ğŸ“ˆ æŸ¥è¯¢ç±»å‹åˆ†å¸ƒï¼ˆAã€AAAAã€MXã€CNAMEç­‰ï¼‰
- âš¡ å“åº”æ—¶é—´ç»Ÿè®¡
- âŒ é”™è¯¯ç‡ç›‘æ§

### ğŸš€ å®æ—¶åŠŸèƒ½
- ğŸ“‹ å½“å‰DNSæŸ¥è¯¢å®æ—¶åˆ—è¡¨
- ğŸ” æŸ¥è¯¢æ¥æºIPè¿½è¸ª
- ğŸŒ æŸ¥è¯¢åŸŸåç›‘æ§
- ğŸ“ æŸ¥è¯¢ç±»å‹è¯†åˆ«
- â±ï¸ å“åº”æ—¶é—´æµ‹é‡

### ğŸ“Š å†å²æ•°æ®
- ğŸ“… æŸ¥è¯¢å†å²è®°å½•è¡¨æ ¼
- ğŸ” å¯æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½
- ğŸ“ˆ æŸ¥è¯¢é‡è¶‹åŠ¿å›¾è¡¨
- ğŸ† çƒ­é—¨æŸ¥è¯¢åŸŸåæ’è¡Œæ¦œ

## ğŸ¨ UIè®¾è®¡

- ğŸŒ™ æ·±è‰²èµ›åšæœ‹å…‹ä¸»é¢˜
- âœ¨ éœ“è™¹ç¯ç‰¹æ•ˆ
- ğŸ“Š åŠ¨æ€æ•°æ®å¯è§†åŒ–
- ğŸŒŸ ç²’å­èƒŒæ™¯æ•ˆæœ
- ğŸ­ å¹³æ»‘åŠ¨ç”»è¿‡æ¸¡
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **HTML5 + CSS3 + JavaScript** - ç°ä»£Webæ ‡å‡†
- **Chart.js** - åŠ¨æ€å›¾è¡¨åº“
- **Particles.js** - ç²’å­èƒŒæ™¯æ•ˆæœ
- **WebSocket** - å®æ—¶æ•°æ®é€šä¿¡
- **å“åº”å¼è®¾è®¡** - æ”¯æŒå„ç§è®¾å¤‡

### åç«¯æŠ€æœ¯æ ˆ
- **Python Flask** - Webæ¡†æ¶
- **psutil** - ç³»ç»Ÿä¿¡æ¯æ”¶é›†
- **Flask-SocketIO** - WebSocketæ”¯æŒ
- **SQLite** - æ•°æ®å­˜å‚¨
- **BIND9æ—¥å¿—è§£æ** - DNSæŸ¥è¯¢åˆ†æ

### éƒ¨ç½²æŠ€æœ¯
- **Docker** - å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆæ”¯æŒæ„å»ºä¼˜åŒ–ï¼‰
- **Nginx** - åå‘ä»£ç†
- **Systemd** - æœåŠ¡ç®¡ç†
- **Supervisor** - è¿›ç¨‹ç›‘æ§

### ğŸš€ æ„å»ºä¼˜åŒ–ç‰¹æ€§
- **æ™ºèƒ½é•œåƒæºé€‰æ‹©** - è‡ªåŠ¨æµ‹è¯•å’Œé€‰æ‹©æœ€å¿«çš„ä¸­å›½é•œåƒæº
- **å¤šé˜¶æ®µæ„å»º** - å‡å°‘é•œåƒå¤§å°30-50%
- **è‡ªåŠ¨æ•…éšœåˆ‡æ¢** - é•œåƒæºå¤±è´¥æ—¶è‡ªåŠ¨å›é€€
- **æ€§èƒ½ç›‘æ§** - å®æ—¶æ„å»ºæ€§èƒ½æ•°æ®
- **å¤šæ¶æ„æ”¯æŒ** - æ”¯æŒAMD64å’ŒARM64
- **ç¯å¢ƒçµæ´»é…ç½®** - æ”¯æŒç¯å¢ƒå˜é‡å’Œæ„å»ºå‚æ•°

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### æ ‡å‡†æ„å»º
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/PageSecOnd/dns-monitor.git
cd dns-monitor

# ä½¿ç”¨Docker Composeå¯åŠ¨
docker-compose -f docker/docker-compose.yml up -d

# è®¿é—®åº”ç”¨
http://localhost:80
```

#### ğŸš€ ä¼˜åŒ–æ„å»ºï¼ˆä¸­å›½ç”¨æˆ·æ¨èï¼‰
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/PageSecOnd/dns-monitor.git
cd dns-monitor

# ä½¿ç”¨ä¼˜åŒ–è„šæœ¬è‡ªåŠ¨é€‰æ‹©æœ€å¿«é•œåƒæºæ„å»ºï¼ˆ3-5åˆ†é’Ÿï¼‰
./scripts/build-optimized.sh build

# æˆ–è€…ä½¿ç”¨docker-composeï¼ˆéœ€è¦å…ˆé…ç½®ç¯å¢ƒå˜é‡ï¼‰
cp .env.template .env
docker-compose -f docker/docker-compose.yml up -d --build

# è®¿é—®åº”ç”¨
http://localhost:80
```

**æ„å»ºä¼˜åŒ–ç‰¹æ€§ï¼š**
- ğŸš€ **æ„å»ºé€Ÿåº¦æå‡3-5å€**ï¼šä»10-15åˆ†é’Ÿç¼©çŸ­åˆ°3-5åˆ†é’Ÿ
- ğŸŒ **æ™ºèƒ½é•œåƒæºé€‰æ‹©**ï¼šè‡ªåŠ¨æµ‹è¯•å¹¶é€‰æ‹©æœ€å¿«çš„ä¸­å›½é•œåƒæº
- ğŸ”„ **è‡ªåŠ¨æ•…éšœåˆ‡æ¢**ï¼šé•œåƒæºå¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ°é»˜è®¤æº
- ğŸ“Š **æ€§èƒ½ç›‘æ§**ï¼šå®æ—¶æ˜¾ç¤ºæ„å»ºæ€§èƒ½æ•°æ®

è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒï¼š[Dockeræ„å»ºä¼˜åŒ–æŒ‡å—](README-docker-optimization.md)

### æ–¹å¼äºŒï¼šä¼ ç»Ÿéƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/PageSecOnd/dns-monitor.git
cd dns-monitor

# è¿è¡Œå®‰è£…è„šæœ¬ï¼ˆéœ€è¦rootæƒé™ï¼‰
sudo ./scripts/install.sh

# æ‰‹åŠ¨å®‰è£…Pythonä¾èµ–
pip3 install -r backend/requirements.txt

# å¯åŠ¨ç®€å•æœåŠ¡å™¨ï¼ˆç”¨äºæ¼”ç¤ºï¼‰
python3 backend/simple_server.py
```

### æ–¹å¼ä¸‰ï¼šå¼€å‘æ¨¡å¼

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/PageSecOnd/dns-monitor.git
cd dns-monitor

# å®‰è£…ä¾èµ–
pip3 install -r backend/requirements.txt

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python3 backend/simple_server.py

# åœ¨æµè§ˆå™¨ä¸­è®¿é—®
http://localhost:5000
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
dns-monitor/
â”œâ”€â”€ backend/                # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app.py             # Flaskä¸»åº”ç”¨
â”‚   â”œâ”€â”€ simple_server.py   # ç®€å•HTTPæœåŠ¡å™¨ï¼ˆæ¼”ç¤ºç”¨ï¼‰
â”‚   â”œâ”€â”€ monitors/          # ç›‘æ§æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ system_monitor.py    # ç³»ç»Ÿç›‘æ§
â”‚   â”‚   â””â”€â”€ dns_monitor.py       # DNSç›‘æ§
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ database.py    # æ•°æ®åº“ç®¡ç†
â”‚   â””â”€â”€ requirements.txt   # Pythonä¾èµ–
â”œâ”€â”€ frontend/              # å‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html        # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ css/              # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ style.css     # ä¸»æ ·å¼
â”‚   â”‚   â”œâ”€â”€ animations.css # åŠ¨ç”»æ•ˆæœ
â”‚   â”‚   â””â”€â”€ responsive.css # å“åº”å¼è®¾è®¡
â”‚   â””â”€â”€ js/               # JavaScriptæ–‡ä»¶
â”‚       â”œâ”€â”€ app.js        # ä¸»åº”ç”¨é€»è¾‘
â”‚       â”œâ”€â”€ charts.js     # å›¾è¡¨åŠŸèƒ½
â”‚       â”œâ”€â”€ websocket.js  # WebSocketé€šä¿¡
â”‚       â”œâ”€â”€ utils.js      # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ particles-config.js # ç²’å­é…ç½®
â”œâ”€â”€ nginx/                # Nginxé…ç½®
â”‚   â””â”€â”€ nginx.conf        # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ docker/               # Dockeré…ç½®
â”‚   â”œâ”€â”€ Dockerfile        # Dockeré•œåƒæ„å»º
â”‚   â”œâ”€â”€ docker-compose.yml # å®¹å™¨ç¼–æ’
â”‚   â””â”€â”€ supervisord.conf  # è¿›ç¨‹ç®¡ç†
â”œâ”€â”€ systemd/              # ç³»ç»ŸæœåŠ¡
â”‚   â””â”€â”€ dns-monitor.service # SystemdæœåŠ¡æ–‡ä»¶
â”œâ”€â”€ scripts/              # éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ install.sh        # è‡ªåŠ¨å®‰è£…è„šæœ¬
â””â”€â”€ docs/                 # æ–‡æ¡£
```

## âš™ï¸ é…ç½®è¯´æ˜

### BIND9é…ç½®

ä¸ºäº†å¯ç”¨DNSæŸ¥è¯¢æ—¥å¿—ï¼Œéœ€è¦åœ¨BIND9é…ç½®ä¸­æ·»åŠ ï¼š

```bind
logging {
    channel query_log {
        file "/var/log/named/query.log" versions 3 size 10m;
        severity info;
        print-category yes;
        print-time yes;
    };
    category queries { query_log; };
};
```

### ç¯å¢ƒå˜é‡

```bash
# Flaské…ç½®
FLASK_ENV=production
FLASK_DEBUG=0

# æœåŠ¡é…ç½®
DNS_MONITOR_HOST=0.0.0.0
DNS_MONITOR_PORT=5000

# è·¯å¾„é…ç½®
BIND_LOG_PATH=/var/log/named/query.log
DATABASE_PATH=/app/backend/data/dns_monitor.db
```

## ğŸ“Š APIæ¥å£

### ç³»ç»Ÿç›‘æ§API

```http
GET /api/system/stats
GET /api/history/system?hours=24
```

### DNSç›‘æ§API

```http
GET /api/dns/stats
GET /api/dns/queries?limit=100
GET /api/history/dns?hours=24
```

## ğŸ”§ æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- é™æ€èµ„æºç¼“å­˜ï¼ˆ1å¹´æœ‰æ•ˆæœŸï¼‰
- Gzipå‹ç¼©
- å“åº”å¼å›¾ç‰‡
- æ‡’åŠ è½½

### åç«¯ä¼˜åŒ–
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- ç¼“å­˜æœºåˆ¶
- å¼‚æ­¥å¤„ç†
- è¿æ¥æ± 

### ç³»ç»Ÿè¦æ±‚
- **æœ€ä½é…ç½®**: 1 CPUæ ¸å¿ƒ, 512MBå†…å­˜
- **æ¨èé…ç½®**: 2 CPUæ ¸å¿ƒ, 2GBå†…å­˜
- **å­˜å‚¨ç©ºé—´**: è‡³å°‘1GBå¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: 100Mbpså¸¦å®½

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- CSRFä¿æŠ¤
- XSSé˜²æŠ¤
- å®‰å…¨å“åº”å¤´
- è®¿é—®æ—¥å¿—è®°å½•
- é€Ÿç‡é™åˆ¶
- HTTPSæ”¯æŒ

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡æ— æ³•å¯åŠ¨**
   ```bash
   sudo systemctl status dns-monitor
   sudo journalctl -u dns-monitor -f
   ```

2. **BIND9æ—¥å¿—æ— æ³•è¯»å–**
   ```bash
   sudo chmod 644 /var/log/named/query.log
   sudo chown bind:adm /var/log/named/query.log
   ```

3. **ç«¯å£å†²çª**
   ```bash
   sudo netstat -tlnp | grep :5000
   sudo lsof -i :5000
   ```

### æ—¥å¿—ä½ç½®

- åº”ç”¨æ—¥å¿—: `/var/log/dns-monitor/`
- Nginxæ—¥å¿—: `/var/log/nginx/`
- ç³»ç»Ÿæ—¥å¿—: `journalctl -u dns-monitor`

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ‘¥ ä½œè€…

- **PageSecOnd** - *åˆå§‹å·¥ä½œ* - [PageSecOnd](https://github.com/PageSecOnd)

## ğŸ™ è‡´è°¢

- [Chart.js](https://www.chartjs.org/) - å›¾è¡¨åº“
- [Particles.js](https://vincentgarreau.com/particles.js/) - ç²’å­æ•ˆæœ
- [Flask](https://flask.palletsprojects.com/) - Webæ¡†æ¶
- [psutil](https://psutil.readthedocs.io/) - ç³»ç»Ÿç›‘æ§åº“

## ğŸ“ˆ ç‰ˆæœ¬å†å²

- **v1.0.0** - åˆå§‹ç‰ˆæœ¬
  - åŸºç¡€ç³»ç»Ÿç›‘æ§
  - DNSæœåŠ¡ç›‘æ§
  - ç°ä»£åŒ–UIç•Œé¢
  - Dockeræ”¯æŒ

---

<p align="center">
  <b>ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼ ğŸŒŸ</b>
</p>